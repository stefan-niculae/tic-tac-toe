!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var a,i,s=Object.freeze({EMPTY:Symbol("Empty Cell"),X:Symbol("X"),O:Symbol("O")}),o=Object.freeze((a={},n(a,s.EMPTY,""),n(a,s.X,"X"),n(a,s.O,"O"),a)),l=Object.freeze({ACTIVE:Symbol("Game Active"),OVER:Symbol("Game Over"),DRAW:Symbol("Draw")}),u=Object.freeze((i={},n(i,l.ACTIVE,"Next player: "),n(i,l.OVER,"Winner: "),n(i,l.DRAW,"Draw"),i)),c=[[[0,-1],[0,1]],[[-1,0],[1,0]],[[-1,-1],[1,1]],[[1,-1],[-1,1]]];t.CELL_STATES=s,t.CELL_DISPLAY=o,t.GAME_PHASES=l,t.STATUS_MESSAGES=u,t.WINNING_LINES_DELTAS=c},function(e,t,r){"use strict";r(2);var n=r(3),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=document.getElementById("games"),s=document.getElementsByClassName("add-button"),o=!0,l=!1,u=void 0;try{for(var c,f=s[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var h=c.value;!function(e){var t=e.getAttribute("data-game-size");e.onclick=function(){return new a.default(+t,i)}}(h)}}catch(e){l=!0,u=e}finally{try{!o&&f.return&&f.return()}finally{if(l)throw u}}},function(e,t){},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),l=function(e){return e&&e.__esModule?e:{default:e}}(o),u=r(0),c=r(6),f=function(){function e(t,r){a(this,e),this.boardSize=t,this.cellMatrix=this.createCells(),this.domElements=this.createDomElements(r),this.phase=u.GAME_PHASES.ACTIVE,this.turnNumber=1,this.stateHistory=[]}return s(e,[{key:"createCells",value:function(){var e=this;return(0,c.range)(this.boardSize).map(function(t){return(0,c.range)(e.boardSize).map(function(t){return new l.default(e)})})}},{key:"createDomElements",value:function(e){var t=(0,c.parseHtml)('\n          <article class="game">\n            \n            <div class="active-side">\n              <p class="status">\n                <span class="message"></span><span class="player"></span>\n              </p>\n              \n              <table class="board">\n              </table>\n            </div>\n\n            <div class="history">\n              <p>History</p>\n              <div class="boards">\n              </div>\n            </div>       \n              \n          </article>\n        ').getElementsByClassName("game")[0],r=this.cellMatrix.map(function(e){return e.map(function(e){return e.domElement})}).map(function(e){var t=document.createElement("tr");return t.append.apply(t,n(e)),t}),a=t.getElementsByClassName("board")[0];a.append.apply(a,n(r)),e.appendChild(t);var i=t.getElementsByClassName("active-side")[0].scrollHeight;return t.getElementsByClassName("history")[0].style.height=i+"px",{game:t,message:t.getElementsByClassName("message")[0],player:t.getElementsByClassName("player")[0],history:t.getElementsByClassName("history")[0],historyBoards:t.getElementsByClassName("boards")[0]}}},{key:"maybeGetCellState",value:function(e,t){var r=this.boardSize;return e<0||e>=r||t<0||t>=this.boardSize?null:this.cellMatrix[e][t].state}},{key:"advanceTurn",value:function(){var e=this.searchWinningCoordinates();return null!==e?(this.phase=u.GAME_PHASES.OVER,void this.highlightWinner(e)):(this.turnNumber+=1,this.turnNumber>this.boardSize*this.boardSize?void(this.phase=u.GAME_PHASES.DRAW):void this.addCurrentStateToHistory())}},{key:"searchWinningCoordinates",value:function(){var e=this,t=this.flatCells.map(function(t){return e.searchWinningNeighbors(t)}).filter(function(e){return null!==e});return(0,c.head)(t)}},{key:"searchWinningNeighbors",value:function(e){var t=this,r=e.row,a=e.col,s=e.cell;if(s.state===u.CELL_STATES.EMPTY)return null;var o=u.WINNING_LINES_DELTAS.map(function(e){var n=e.map(function(e){var t=i(e,2),n=t[0],s=t[1];return[r+n,a+s]});return{neighborCoordinates:n,neighborValues:n.map(function(e){var r=i(e,2),n=r[0],a=r[1];return t.maybeGetCellState(n,a)})}}),l=o.filter(function(e){e.neighborCoordinates;return e.neighborValues.every(function(e){return e===s.state})});return 0===l.length?null:[[r,a]].concat(n(l[0].neighborCoordinates))}},{key:"highlightWinner",value:function(e){var t=this;this.flatCells.forEach(function(e){return e.cell.domElement.classList.remove("winner")}),e.forEach(function(e){var r=i(e,2),n=r[0],a=r[1];return t.cellMatrix[n][a].domElement.classList.add("winner")})}},{key:"addCurrentStateToHistory",value:function(){var e=this.cellMatrix.map(function(e){return e.map(function(e){return e.state})});this.stateHistory=[].concat(n(this.stateHistory),[{cellStateMatrix:e,phase:this.phase,turnNumber:this.turnNumber}])}},{key:"resetToState",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=this.flatCells[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value,o=s.row,l=s.col;s.cell.state=e.cellStateMatrix[o][l]}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this.phase=e.phase,this.turnNumber=e.turnNumber;var u=this.stateHistory.slice(0,e.turnNumber);this.stateHistory=(0,c.deepCopyArray)(u)}},{key:"createHistoryBoard",value:function(e){var t=this,r=e.cellStateMatrix.map(function(e){var t=e.map(function(e){var t=document.createElement("td");return t.textContent=u.CELL_DISPLAY[e],t}),r=document.createElement("tr");return r.append.apply(r,n(t)),r}),a=document.createElement("table");return a.classList.add("board"),a.onclick=function(){return t.resetToState(e)},a.append.apply(a,n(r)),a}},{key:"phase",set:function(e){this._phase=e,this.phase===u.GAME_PHASES.ACTIVE?this.domElements.game.classList.remove("game-over","draw"):this.domElements.game.classList.add(this.phase===u.GAME_PHASES.OVER?"game-over":"draw"),this.domElements.message.textContent=u.STATUS_MESSAGES[this.phase]},get:function(){return this._phase}},{key:"turnNumber",set:function(e){this._turnNumber=e,this.domElements.player.textContent=u.CELL_DISPLAY[this.currentPlayer]},get:function(){return this._turnNumber}},{key:"stateHistory",set:function(e){var t,r=this;this._history=e;var a=this.stateHistory.map(function(e){return r.createHistoryBoard(e)});(0,c.removeChildren)(this.domElements.historyBoards),(t=this.domElements.historyBoards).append.apply(t,n(a));var i=this.domElements.history;i.scrollTop=i.scrollHeight},get:function(){return this._history}},{key:"currentPlayer",get:function(){return this.turnNumber%2==0?u.CELL_STATES.O:u.CELL_STATES.X}},{key:"flatCells",get:function(){var e,t=this,r=(0,c.range)(this.boardSize).map(function(e){return(0,c.range)(t.boardSize).map(function(r){return{row:e,col:r,cell:t.cellMatrix[e][r]}})});return(e=[]).concat.apply(e,n(r))}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(5),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),l=function(){function e(t){var r=this;n(this,e),this._state=o.CELL_STATES.EMPTY,this.game=t,this.domElement=document.createElement("td"),this.domElement.classList+="ripple",this.domElement.onclick=function(e){return r.fillCell(e)}}return a(e,[{key:"fillCell",value:function(e){var t=this;this.game.phase!==o.GAME_PHASES.OVER&&this.state===o.CELL_STATES.EMPTY&&(this.state=this.game.currentPlayer,(0,s.default)(e,this.domElement),setTimeout(function(){return t.domElement.classList.add("noninteractive")},500),this.game.advanceTurn())}},{key:"state",set:function(e){this._state=e,this.domElement.textContent=o.CELL_DISPLAY[e],e===o.CELL_STATES.EMPTY&&this.domElement.classList.remove("noninteractive")},get:function(){return this._state}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e,t){var r=e.getElementsByClassName(t);if(r.length>0)return r[0];var n=document.createElement("div");return n.classList.add(t),e.prepend(n),n}function a(e,t){var r=n(t,"ripple-ink");r.classList.remove("animate");var a=Math.max(t.offsetHeight,t.offsetWidth)+"px";r.style.height=a,r.style.width=a;var i=e.pageX-t.offsetLeft-r.offsetWidth/2,s=e.pageY-t.offsetTop-r.offsetHeight/2;r.style.left=i+"px",r.style.top=s+"px",r.classList.add("animate")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e){return Object.assign([],e)}function i(e){return[].concat(n(new Array(e).keys()))}function s(e){return 0===e.length?null:e[0]}function o(e){return(new DOMParser).parseFromString(e,"text/html")}function l(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopyArray=a,t.range=i,t.head=s,t.parseHtml=o,t.removeChildren=l}]);
//# sourceMappingURL=bundle.js.map